

<ion-card class="modal">
  <ion-card-header>{{data.name}}</ion-card-header>

  <ion-card-content>

    <div class="listElement">
      <h3>Description:</h3>
      <h2 *ngIf="data.explanation">{{data.explanation}}</h2>
      <h2 *ngIf="data.custom">Custom data you configured</h2>
    </div>

    <div class="listElement" *ngIf="data.recommendingGoals">
      <h3>Recommended based on your goals:</h3>
      <h2 text-wrap *ngFor="let goal of goalList">{{goal}}</h2>
    </div>


    <div class="listElement">
    <h2>How you're tracking</h2>
      <div class="fullSelect">

        <div class="selectOption">
          <div class="optionName" item-left>
            {{data.field}}
            <ion-icon item-right *ngIf="!fieldButtonsExpanded" name="arrow-dropdown" (click)="fieldButtonsExpanded = true;"></ion-icon>
            <ion-icon icon-end item-right *ngIf="fieldButtonsExpanded" name="arrow-dropup" (click)="fieldButtonsExpanded = false;"></ion-icon>
          </div>
          <span *ngIf="fieldButtonsExpanded" class="optionDetails">
            <span *ngIf="!data.recommendedField || data.field!==data.recommendedField">
              {{data['fieldExplanation']}}
            </span>
            <span *ngIf="data.recommendedField && data.field===data.recommendedField">
                  <div class="recommended">(recommended)</div>
              {{data.fieldDescription}}
                </span>
          </span>
        </div>

        <ng-container *ngIf="fieldButtonsExpanded">
          <ng-container *ngFor="let field of fieldList">
            <div class="selectOption" *ngIf="field['name'] !== data.field" (click)="editedField(field)">
              <div class="optionName">
                {{field['name']}}
              </div>
              <div class="optionDetails">
                <span *ngIf="!data.recommendedField || field['name']!==data.recommendedField">
                  {{field['explanation']}}
                </span>
                <span *ngIf="data.recommendedField && field['name']===data.recommendedField">
                  <div class="recommended">(recommended)</div>
                  {{data.fieldDescription}}
                </span>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>


    <div class="listElement" *ngIf="allowsGoals &&
                          (data.field !== undefined && data.field === 'binary' || data.field === 'number')">



    <h3>
      Goal/Limit (Optional):
    </h3>

      <div class="selectOption goalSelects">

        <div>
          <div class="miniSelect">
            {{data.goal.freq}}
            <ion-icon item-right *ngIf="!goalFreqExpanded" name="arrow-dropdown" (click)="goalFreqExpanded = true;"></ion-icon>
            <ion-icon icon-end item-right *ngIf="goalFreqExpanded" name="arrow-dropup" (click)="goalFreqExpanded = false;"></ion-icon>
          </div>
          <ng-container *ngIf="goalFreqExpanded">
            <div class="miniSelect" *ngIf="data.goal.freq!=='More'">
              More
            </div>
            <div class="miniSelect" *ngIf="data.goal.freq!=='Less'">
              Less
            </div>
          </ng-container>
        </div>

        <div class="goalText">than</div>

        <div>
          <ion-input size="number" type="number" text-right class="textBox"  no-padding no-border
          [placeholder]="(data.goal && data.goal.threshold) ? data.goal.threshold : '---'"
          [(ngModel)]="data.goal.threshold" (ngModelChange)="editedGoal('thresh')"></ion-input>
        </div>

        <div class="goalText">times per</div>

        <div>
          <div  class="miniSelect">
          {{data.goal.timespan}}
          <ion-icon item-right *ngIf="!goalTimeExpanded" name="arrow-dropdown" (click)="goalTimeExpanded = true;"></ion-icon>
          <ion-icon icon-end item-right *ngIf="goalTimeExpanded" name="arrow-dropup" (click)="goalTimeExpanded = false;"></ion-icon>
          </div>

          <ng-container *ngIf="goalTimeExpanded">
            <div class="miniSelect" *ngIf="data.goal.timespan!=='Day'">
              Day
            </div>
            <div class="miniSelect" *ngIf="data.goal.timespan!=='Week'">
              Week
            </div>
            <div class="miniSelect" *ngIf="data.goal.timespan!=='Month'">
              Month
            </div>
          </ng-container>

        </div>

        <ion-icon item-right name="close"></ion-icon>








        <!--<ion-label>than</ion-label>-->



      <!--<ion-label>times per</ion-label>-->
      <!--<ion-select [(ngModel)]="data.goal.timespan" (ngModelChange)="editedField()">-->
        <!--<ion-option *ngIf="data.field !== 'binary'"-->
                    <!--value="Day" [selected]="data.goal && data.goal.timespan === 'Day'">-->
          <!--Day-->
        <!--</ion-option>-->
        <!--<ion-option value="Week" [selected]="data.goal && data.goal.timespan === 'Week'">-->
          <!--Week-->
        <!--</ion-option>-->
        <!--<ion-option value="Month" [selected]="data.goal && data.goal.timespan === 'Month'">-->
          <!--Month-->
        <!--</ion-option>-->
      <!--</ion-select>-->

    </div>
    </div>



    <button float-left ion-button (click)="backToConfig('cancel')">
      Cancel
    </button>

    <button *ngIf="!data.selected || somethingEdited" float-right ion-button (click)="backToConfig('add')">
      <ng-container *ngIf="!data.selected">Add</ng-container>
      <ng-container *ngIf="data.selected">Save</ng-container>
    </button>

    <button *ngIf="data.selected && !somethingEdited" float-right ion-button (click)="backToConfig('remove')">
      Remove
    </button>

  </ion-card-content>

</ion-card>


